@page "/resources"
@inject IJSRuntime JS

<PageTitle>Resources | StudyHub</PageTitle>

<div class="bg-gray-50 font-sans min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <i data-feather="book-open" class="text-blue-500 h-8 w-8"></i>
                        <span class="ml-2 text-xl font-semibold text-gray-900">StudyHub</span>
                    </div>
                    <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                        <a href="/dashboard" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Dashboard</a>
                        <a href="/modules" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Modules</a>
                        <a href="/resources" class="border-blue-500 text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Resources</a>
                        <a href="/messages" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Messages</a>
                    </div>
                </div>
                <div class="hidden sm:ml-6 sm:flex sm:items-center">
                    <button type="button" class="bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 relative">
                        <span class="sr-only">View notifications</span>
                        <i data-feather="bell"></i>
                        <span class="notification-dot bg-red-500 rounded-full"></span>
                    </button>

                    <div class="ml-3 relative">
                        <div>
                            <button type="button" class="bg-white rounded-full flex text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" id="user-menu-button" aria-expanded="false" aria-haspopup="true">
                                <span class="sr-only">Open user menu</span>
                                <img class="h-8 w-8 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="">
                            </button>
                        </div>
                    </div>
                </div>
                <div class="-mr-2 flex items-center sm:hidden">
                    <button type="button"
                            class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500"
                            aria-controls="mobile-menu"
                            aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <i data-feather="menu"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile menu -->
        <div id="mobile-menu" class="sm:hidden hidden">
            <div class="pt-2 pb-3 space-y-1">
                <a href="/dashboard" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-gray-300">Dashboard</a>
                <a href="/modules" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-gray-300">Modules</a>
                <a href="/resources" class="block pl-3 pr-4 py-2 border-l-4 border-blue-500 bg-blue-50 text-blue-700 text-base font-medium">Resources</a>
                <a href="/messages" class="block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-gray-300">Messages</a>
            </div>
        </div>
    </nav>

    <!-- Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="lg:grid lg:grid-cols-12 lg:gap-6">
            <!-- Sidebar filters -->
            <aside class="lg:col-span-3">
                <div class="bg-white shadow rounded-lg overflow-hidden">
                    <div class="p-6">
                        <h3 class="text-lg font-medium text-gray-900 mb-4">Filters</h3>

                        <!-- Search -->
                        <div class="mb-4">
                            <label for="res-search" class="block text-sm font-medium text-gray-700">Search</label>
                            <div class="mt-1 relative rounded-md shadow-sm">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i data-feather="search" class="h-4 w-4 text-gray-400"></i>
                                </div>
                                <input id="res-search" type="text" class="focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md" placeholder="Search resources">
                            </div>
                        </div>

                        <!-- Type -->
                        <div class="mb-4">
                            <label for="res-type" class="block text-sm font-medium text-gray-700">Type</label>
                            <select id="res-type" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option value="">All Types</option>
                                <option value="notes">Notes</option>
                                <option value="slides">Slides</option>
                                <option value="assignment">Assignment</option>
                                <option value="tutorial">Tutorial</option>
                                <option value="link">Link</option>
                            </select>
                        </div>

                        <!-- Module -->
                        <div class="mb-4">
                            <label for="res-module" class="block text-sm font-medium text-gray-700">Module</label>
                            <select id="res-module" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option value="">All Modules</option>
                                <option value="cs101">CS101 - Intro to Programming</option>
                                <option value="cs201">CS201 - Data Structures</option>
                                <option value="cs301">CS301 - Web Development</option>
                                <option value="cs401">CS401 - Cybersecurity</option>
                            </select>
                        </div>

                        <!-- Tags -->
                        <div>
                            <p class="block text-sm font-medium text-gray-700 mb-2">Tags</p>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" name="tags" value="python" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="ml-2 text-sm text-gray-700">Python</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="tags" value="algorithms" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="ml-2 text-sm text-gray-700">Algorithms</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="tags" value="databases" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="ml-2 text-sm text-gray-700">Databases</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="tags" value="security" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                    <span class="ml-2 text-sm text-gray-700">Security</span>
                                </label>
                            </div>
                        </div>

                        <button id="res-clear" type="button" class="mt-6 w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            Clear filters
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Main -->
            <section class="lg:col-span-9 mt-6 lg:mt-0">
                <div class="bg-white shadow rounded-lg overflow-hidden">
                    <div class="px-4 py-5 sm:px-6 border-b border-gray-200 flex items-center justify-between">
                        <div>
                            <h3 class="text-lg leading-6 font-medium text-gray-900">All Resources</h3>
                            <p class="text-sm text-gray-500">Search and filter files shared across your modules.</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                <i data-feather="upload-cloud" class="mr-2 h-4 w-4"></i>
                                Upload
                            </button>
                            <button class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                <i data-feather="filter" class="mr-2 h-4 w-4"></i>
                                Sort
                            </button>
                        </div>
                    </div>

                    <div class="px-4 py-5 sm:p-6">
                        <!-- Resource list -->
                        <ul id="res-list" class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                            <!-- Card -->
                            <li class="res-card" data-type="slides" data-module="cs101" data-tags="python,intro">
                                <div class="relative rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm hover:border-gray-400">
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 rounded-md p-3 bg-blue-100">
                                            <i data-feather="file-text" class="h-6 w-6 text-blue-600"></i>
                                        </div>
                                        <div class="ml-4 flex-1 min-w-0">
                                            <h4 class="text-sm font-medium text-gray-900 truncate">Lecture 01 - Python Basics (Slides)</h4>
                                            <p class="text-sm text-gray-500 truncate">CS101 • Uploaded by Dr. Sarah Johnson • 2 MB • PDF</p>
                                            <div class="mt-2 space-x-2">
                                                <span class="badge">Slides</span>
                                                <span class="badge">Python</span>
                                            </div>
                                        </div>
                                        <button class="fav-btn p-2 rounded hover:bg-gray-100" aria-pressed="false" title="Add to favorites">
                                            <i data-feather="star" class="h-4 w-4 text-gray-400"></i>
                                        </button>
                                    </div>
                                    <div class="mt-4 flex justify-end space-x-2">
                                        <a href="#" class="btn-secondary">
                                            <i data-feather="eye" class="mr-1 h-4 w-4"></i> Preview
                                        </a>
                                        <a href="#" class="btn-primary">
                                            <i data-feather="download" class="mr-1 h-4 w-4"></i> Download
                                        </a>
                                    </div>
                                </div>
                            </li>

                            <!-- Card -->
                            <li class="res-card" data-type="assignment" data-module="cs201" data-tags="algorithms">
                                <div class="relative rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm hover:border-gray-400">
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 rounded-md p-3 bg-green-100">
                                            <i data-feather="file" class="h-6 w-6 text-green-600"></i>
                                        </div>
                                        <div class="ml-4 flex-1 min-w-0">
                                            <h4 class="text-sm font-medium text-gray-900 truncate">Assignment 2 — Linked Lists</h4>
                                            <p class="text-sm text-gray-500 truncate">CS201 • Uploaded by Michael Chen • 350 KB • DOCX</p>
                                            <div class="mt-2 space-x-2">
                                                <span class="badge">Assignment</span>
                                                <span class="badge">Algorithms</span>
                                            </div>
                                        </div>
                                        <button class="fav-btn p-2 rounded hover:bg-gray-100" aria-pressed="true" title="Remove from favorites">
                                            <i data-feather="star" class="h-4 w-4 text-yellow-400"></i>
                                        </button>
                                    </div>
                                    <div class="mt-4 flex justify-end space-x-2">
                                        <a href="#" class="btn-secondary">
                                            <i data-feather="eye" class="mr-1 h-4 w-4"></i> Preview
                                        </a>
                                        <a href="#" class="btn-primary">
                                            <i data-feather="download" class="mr-1 h-4 w-4"></i> Download
                                        </a>
                                    </div>
                                </div>
                            </li>

                            <!-- Card -->
                            <li class="res-card" data-type="notes" data-module="cs301" data-tags="web,html,css">
                                <div class="relative rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm hover:border-gray-400">
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 rounded-md p-3 bg-purple-100">
                                            <i data-feather="book" class="h-6 w-6 text-purple-600"></i>
                                        </div>
                                        <div class="ml-4 flex-1 min-w-0">
                                            <h4 class="text-sm font-medium text-gray-900 truncate">Week 4 Notes — Layout &amp; Flexbox</h4>
                                            <p class="text-sm text-gray-500 truncate">CS301 • Uploaded by Emily Wilson • 900 KB • MD</p>
                                            <div class="mt-2 space-x-2">
                                                <span class="badge">Notes</span>
                                                <span class="badge">Web</span>
                                            </div>
                                        </div>
                                        <button class="fav-btn p-2 rounded hover:bg-gray-100" aria-pressed="false" title="Add to favorites">
                                            <i data-feather="star" class="h-4 w-4 text-gray-400"></i>
                                        </button>
                                    </div>
                                    <div class="mt-4 flex justify-end space-x-2">
                                        <a href="#" class="btn-secondary">
                                            <i data-feather="eye" class="mr-1 h-4 w-4"></i> Preview
                                        </a>
                                        <a href="#" class="btn-primary">
                                            <i data-feather="download" class="mr-1 h-4 w-4"></i> Download
                                        </a>
                                    </div>
                                </div>
                            </li>

                            <!-- Card -->
                            <li class="res-card" data-type="tutorial" data-module="cs401" data-tags="security,python">
                                <div class="relative rounded-lg border border-gray-300 bg-white px-6 py-5 shadow-sm hover:border-gray-400">
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0 rounded-md p-3 bg-red-100">
                                            <i data-feather="shield" class="h-6 w-6 text-red-600"></i>
                                        </div>
                                        <div class="ml-4 flex-1 min-w-0">
                                            <h4 class="text-sm font-medium text-gray-900 truncate">Lab Tutorial — Hashing &amp; Salting</h4>
                                            <p class="text-sm text-gray-500 truncate">CS401 • Uploaded by David Miller • 1.4 MB • ZIP</p>
                                            <div class="mt-2 space-x-2">
                                                <span class="badge">Tutorial</span>
                                                <span class="badge">Security</span>
                                            </div>
                                        </div>
                                        <button class="fav-btn p-2 rounded hover:bg-gray-100" aria-pressed="false" title="Add to favorites">
                                            <i data-feather="star" class="h-4 w-4 text-gray-400"></i>
                                        </button>
                                    </div>
                                    <div class="mt-4 flex justify-end space-x-2">
                                        <a href="#" class="btn-secondary">
                                            <i data-feather="eye" class="mr-1 h-4 w-4"></i> Preview
                                        </a>
                                        <a href="#" class="btn-primary">
                                            <i data-feather="download" class="mr-1 h-4 w-4"></i> Download
                                        </a>
                                    </div>
                                </div>
                            </li>
                        </ul>

                        <!-- Pagination (static UI) -->
                        <div class="mt-8 flex items-center justify-between">
                            <div class="flex-1 flex justify-between sm:hidden">
                                <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">Previous</a>
                                <a href="#" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">Next</a>
                            </div>
                            <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                                <div>
                                    <p class="text-sm text-gray-700">Showing <span class="font-medium">1</span> to <span class="font-medium">4</span> of <span class="font-medium">24</span> results</p>
                                </div>
                                <div>
                                    <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                        <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                            <span class="sr-only">Previous</span>
                                            <i data-feather="chevron-left" class="h-5 w-5"></i>
                                        </a>
                                        <a href="#" aria-current="page" class="z-10 bg-blue-50 border-blue-500 text-blue-600 relative inline-flex items-center px-4 py-2 border text-sm font-medium">1</a>
                                        <a href="#" class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium">2</a>
                                        <a href="#" class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium">3</a>
                                        <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                            <span class="sr-only">Next</span>
                                            <i data-feather="chevron-right" class="h-5 w-5"></i>
                                        </a>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div> <!-- /px -->
                </div> <!-- /card -->
            </section>
        </div>
    </div>
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("ui.initFeather");        // icons
            await JS.InvokeVoidAsync("ui.initAOS");            // animations if you add data-aos later
            await JS.InvokeVoidAsync("ui.wireDashboardMenu");  // mobile menu toggle
            await JS.InvokeVoidAsync("ui.wireResourcesPage");  // search + filters + favorites
        }
    }
}
